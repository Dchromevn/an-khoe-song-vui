<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒÇn ƒë√∫ng - S·ªëng kh·ªèe</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .screen {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .screen.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .logo {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo h1 {
            color: #4CAF50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .logo p {
            color: #666;
            font-size: 1.2em;
        }
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus, .form-group select:focus {
            border-color: #4CAF50;
            outline: none;
        }
        
        .btn {
            background: #4CAF50;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8glichkeiten8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
        }
        
        .btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #2196F3;
        }
        
        .btn-secondary:hover {
            background: #1976D2;
        }
        
        .btn-outline {
            background: transparent;
            color: #4CAF50;
            border: 2px solid #4CAF50;
        }
        
        .btn-outline:hover {
            background: #4CAF50;
            color: white;
        }
        
        .goals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .goal-card {
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .goal-card:hover, .goal-card.selected {
            border-color: #4CAF50;
            background: #f0f8f0;
            transform: translateY(-5px);
        }
        
        .goal-card .icon {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .meal-card {
            border: 1px solid #ddd;
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.3s;
            background: white;
            margin-bottom: 15px;
        }
        
        .meal-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .meal-image {
            width: 100%;
            height: 120px;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden; /* ƒê·∫£m b·∫£o ·∫£nh kh√¥ng tr√†n ra ngo√†i */
        }

        .meal-image img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* ƒê·∫£m b·∫£o ·∫£nh v·ª´a khung m√† kh√¥ng b·ªã m√©o */
        }
        
        .meal-info {
            padding: 15px;
        }
        
        .meal-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .nutrition-info {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin: 10px 0;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 8px;
        }
        
        .nutrition-item {
            text-align: center;
        }
        
        .nutrition-item .value {
            font-weight: bold;
            color: #4CAF50;
            font-size: 0.9em;
        }
        
        .nutrition-item .label {
            font-size: 0.8em;
            color: #666;
        }
        
        .daily-menu {
            display: grid;
            gap: 20px;
            margin: 20px 0;
        }
        
        .meal-section {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 12px;
        }
        
        .meal-section h3 {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .swap-btn {
            background: #FF9800;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-left: 10px;
        }
        
        .swap-btn:hover {
            background: #F57C00;
        }
        
        .total-nutrition {
            background: #E8F5E8;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }
        
        .total-nutrition h3 {
            color: #4CAF50;
            margin-bottom: 15px;
        }
        
        .progress-bar {
            background: #ddd;
            border-radius: 10px;
            height: 20px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            background: #4CAF50;
            height: 100%;
            transition: width 0.5s ease;
        }
        
        .recipe-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            z-index: 1000;
        }
        
        .recipe-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            width: 90%;
        }
        
        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }
        
        .ingredients-list {
            list-style: none;
            margin: 15px 0;
        }
        
        .ingredients-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .steps-list {
            margin: 15px 0;
        }
        
        .steps-list li {
            margin: 10px 0;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 8px;
        }
        
        .profile-summary {
            background: #E3F2FD;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        
        .profile-summary h3 {
            color: #1976D2;
            margin-bottom: 10px;
        }
        
        .back-btn {
            background: #666;
            margin-bottom: 20px;
        }
        
        .back-btn:hover {
            background: #555;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .recommended-badge {
            background: #4CAF50;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="screen active" id="welcome-screen">
            <div class="logo">
                <h1>üçÉ ƒÇn ƒë√∫ng - S·ªëng kh·ªèe</h1>
                <p>·ª®ng d·ª•ng dinh d∆∞·ª°ng th√¥ng minh c√° nh√¢n h√≥a</p>
            </div>
            <div style="text-align: center;">
                <button class="btn" onclick="showScreen('login-screen')">ƒêƒÉng nh·∫≠p</button>
                <button class="btn btn-secondary" onclick="showScreen('profile-screen')">ƒêƒÉng k√Ω mi·ªÖn ph√≠</button>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <p style="color: #666;">ƒêƒÉng nh·∫≠p b·∫±ng:</p>
                <button class="btn btn-outline" style="margin: 10px;">üìß Google</button>
                <button class="btn btn-outline" style="margin: 10px;">üçé Apple ID</button>
            </div>
        </div>

        <div class="screen" id="login-screen">
            <button class="btn back-btn" onclick="showScreen('welcome-screen')">‚Üê Quay l·∫°i</button>
            <div class="logo">
                <h1>üçÉ ƒêƒÉng nh·∫≠p</h1>
                <p>Ch√†o m·ª´ng tr·ªü l·∫°i!</p>
            </div>
            <div class="form-group">
                <label>Email:</label>
                <input type="email" id="login-email" placeholder="Nh·∫≠p email c·ªßa b·∫°n">
            </div>
            <div class="form-group">
                <label>M·∫≠t kh·∫©u:</label>
                <input type="password" id="login-password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
            </div>
            <div style="text-align: center;">
                <button class="btn" onclick="login()">ƒêƒÉng nh·∫≠p</button>
                <p style="margin-top: 15px;"><a href="#" style="color: #4CAF50;">Qu√™n m·∫≠t kh·∫©u?</a></p>
            </div>
        </div>

        <div class="screen" id="profile-screen">
            <button class="btn back-btn" onclick="showScreen('welcome-screen')">‚Üê Quay l·∫°i</button>
            <div class="logo">
                <h1>üè• Thi·∫øt l·∫≠p h·ªì s∆° s·ª©c kh·ªèe</h1>
                <p>Gi√∫p ch√∫ng t√¥i t·∫°o th·ª±c ƒë∆°n ph√π h·ª£p v·ªõi b·∫°n</p>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label>Gi·ªõi t√≠nh:</label>
                    <select id="gender">
                        <option value="male">Nam</option>
                        <option value="female">N·ªØ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Tu·ªïi:</label>
                    <input type="number" id="age"  min="10" max="100">
                </div>
                <div class="form-group">
                    <label>Chi·ªÅu cao (cm):</label>
                    <input type="number" id="height"  min="100" max="250">
                </div>
                <div class="form-group">
                    <label>C√¢n n·∫∑ng (kg):</label>
                    <input type="number" id="weight"  min="30" max="200">
                </div>
            </div>

            <div class="form-group">
                <label>T√¨nh tr·∫°ng s·ª©c kh·ªèe:</label>
                <select id="health-condition">
                    <option value="normal">B√¨nh th∆∞·ªùng</option>
                    <option value="hypertension">Cao huy·∫øt √°p</option>
                    <option value="diabetes">Ti·ªÉu ƒë∆∞·ªùng</option>
                    <option value="gout">B·ªánh gout</option>
                    <option value="heart">B·ªánh tim</option>
                </select>
            </div>

            <div class="form-group">
                <label>M·ª©c ƒë·ªô v·∫≠n ƒë·ªông:</label>
                <select id="activity-level">
                    <option value="sedentary">√çt v·∫≠n ƒë·ªông (c√¥ng vi·ªác vƒÉn ph√≤ng)</option>
                    <option value="light">V·∫≠n ƒë·ªông nh·∫π (1-3 ng√†y/tu·∫ßn)</option>
                    <option value="moderate">V·∫≠n ƒë·ªông v·ª´a (3-5 ng√†y/tu·∫ßn)</option>
                    <option value="active">V·∫≠n ƒë·ªông nhi·ªÅu (6-7 ng√†y/tu·∫ßn)</option>
                </select>
            </div>

            <label style="font-weight: bold; display: block; margin: 20px 0 15px 0;">M·ª•c ti√™u c√° nh√¢n:</label>
            <div class="goals-grid">
                <div class="goal-card" onclick="selectGoal(this, 'muscle')">
                    <div class="icon">üèãÔ∏è</div>
                    <div>TƒÉng c∆°</div>
                </div>
                <div class="goal-card" onclick="selectGoal(this, 'weight-loss')">
                    <div class="icon">‚öñÔ∏è</div>
                    <div>Gi·∫£m c√¢n</div>
                </div>
                <div class="goal-card" onclick="selectGoal(this, 'maintain')">
                    <div class="icon">üçÉ</div>
                    <div>Gi·ªØ s·ª©c kh·ªèe</div>
                </div>
                <div class="goal-card" onclick="selectGoal(this, 'vegetarian')">
                    <div class="icon">üå±</div>
                    <div>ƒÇn chay</div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="saveProfile()">Ti·∫øp t·ª•c ‚Üí T·∫°o th·ª±c ƒë∆°n</button>
            </div>
        </div>

        <div class="screen" id="menu-screen">
            <div class="profile-summary" id="profile-summary">
                </div>

            <div class="logo">
                <h1>üçΩÔ∏è Th·ª±c ƒë∆°n h√¥m nay</h1>
                <p>ƒê∆∞·ª£c t·ªëi ∆∞u h√≥a cho m·ª•c ti√™u c·ªßa b·∫°n</p>
            </div>
            
            <div class="total-nutrition" id="total-nutrition">
                <h3>üìä T·ªïng dinh d∆∞·ª°ng trong ng√†y</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div>
                        <strong>Calo: <span id="total-calories">0</span>/<span id="target-calories">0</span></strong>
                        <div class="progress-bar">
                            <div class="progress-fill" id="calories-progress"></div>
                        </div>
                    </div>
                    <div>
                        <strong>Protein: <span id="total-protein">0</span>g/<span id="target-protein">0</span>g</strong>
                        <div class="progress-bar">
                            <div class="progress-fill" id="protein-progress"></div>
                        </div>
                    </div>
                    <div>
                        <strong>Carbs: <span id="total-carbs">0</span>g/<span id="target-carbs">0</span>g</strong>
                        <div class="progress-bar">
                            <div class="progress-fill" id="carbs-progress"></div>
                        </div>
                    </div>
                    <div>
                        <strong>Ch·∫•t b√©o: <span id="total-fat">0</span>g/<span id="target-fat">0</span>g</strong>
                        <div class="progress-bar">
                            <div class="progress-fill" id="fat-progress"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="daily-menu">
                <div class="meal-section">
                    <h3>üåÖ B·ªØa s√°ng <button class="swap-btn" onclick="swapMeal('breakfast')">üîÅ ƒê·ªïi m√≥n</button></h3>
                    <div id="breakfast-meals"></div>
                </div>
                
                <div class="meal-section">
                    <h3>‚òÄÔ∏è B·ªØa tr∆∞a <button class="swap-btn" onclick="swapMeal('lunch')">üîÅ ƒê·ªïi m√≥n</button></h3>
                    <div id="lunch-meals"></div>
                </div>
                
                <div class="meal-section">
                    <h3>üåô B·ªØa t·ªëi <button class="swap-btn" onclick="swapMeal('dinner')">üîÅ ƒê·ªïi m√≥n</button></h3>
                    <div id="dinner-meals"></div>
                </div>
                
                <div class="meal-section">
                    <h3>üçé ƒÇn ph·ª• <button class="swap-btn" onclick="swapMeal('snack')">üîÅ ƒê·ªïi m√≥n</button></h3>
                    <div id="snack-meals"></div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-secondary" onclick="showScreen('profile-screen')">‚öôÔ∏è Ch·ªânh s·ª≠a h·ªì s∆°</button>
            </div>
        </div>
    </div>

    <div class="recipe-modal" id="recipe-modal">
        <div class="recipe-content">
            <span class="close-btn" onclick="closeRecipe()">&times;</span>
            <div id="recipe-details"></div>
        </div>
    </div>

    <script>
        // User profile data
        let userProfile = {
            gender: 'male',
            age: 25,
            height: 170,
            weight: 65,
            healthCondition: 'normal',
            activityLevel: 'moderate',
            goal: 'maintain'
        };

        // Current daily menu
        let dailyMenu = {
            breakfast: [],
            lunch: [],
            dinner: [],
            snack: []
        };

        // 15 m√≥n ƒÉn Vi·ªát Nam
        const meals = [
            // Breakfast
            {
                id: 1, name: "Ph·ªü b√≤", emoji: "üçú", category: "breakfast",
                calories: 550, protein: 35, carbs: 60, 
                fat: 20, ingredients: ["500g th·ªãt b√≤", "200g b√°nh ph·ªü", "H√†nh t√¢y", "Gia v·ªã ph·ªü", "Rau th∆°m"],
                steps: ["Ninh x∆∞∆°ng b√≤ 2-3 ti·∫øng", "Th√°i th·ªãt b√≤ m·ªèng", "Tr·∫ßn b√°nh ph·ªü", "M√∫c n∆∞·ªõc d√πng", "Th√™m th·ªãt v√† rau th∆°m"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/pho-bo.jpg"
            },
            {
                id: 2, name: "B√°nh m√¨ tr·ª©ng ·ªëp la", emoji: "ü•ñüç≥", category: "breakfast",
                calories: 400, protein: 22, carbs: 45, 
                fat: 16, ingredients: ["B√°nh m√¨", "Tr·ª©ng", "Pate", "Rau th∆°m", "T∆∞∆°ng ·ªõt"],
                steps: ["·ªêp la tr·ª©ng", "C·∫Øt b√°nh m√¨", "Ph·∫øt pate", "Cho tr·ª©ng v√† rau", "Th∆∞·ªüng th·ª©c"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/banh-my-trung.jpg"
            },
            {
                id: 3, name: "Ch√°o g√†", emoji: "üçö", category: "breakfast",
                calories: 320, protein: 25, carbs: 40, 
                fat: 8, ingredients: ["G√†", "G·∫°o", "G·ª´ng", "H√†nh l√°", "Gia v·ªã"],
                steps: ["Ninh g√†", "N·∫•u ch√°o", "X√© g√† nh·ªè", "N√™m n·∫øm", "R·∫Øc h√†nh l√°"],
                suitable: ["normal", "diabetes", "hypertension", "lose-weight","maintain"], image_url: "img/chao-ga.jpg"
            },
            {
                id: 4, name: "B√°nh cu·ªën nh√¢n th·ªãt m·ªôc nhƒ©", emoji: "ü•ü", category: "breakfast",
                calories: 300, protein: 15, carbs: 40, 
                fat: 10, ingredients: ["B·ªôt g·∫°o", "Th·ªãt heo", "M·ªôc nhƒ©", "H√†nh t√≠m", "N∆∞·ªõc m·∫Øm"],
                steps: ["Pha b·ªôt", "X√†o nh√¢n", "Tr√°ng b√°nh", "Cu·ªën nh√¢n", "ƒÇn k√®m ch·∫£"],
                suitable: ["normal", "lose-weight", "hypertension", "maintain"], image_url: "img/banh-cuon-nhan-thit.jpg"
            },
            {
                id: 5, name: "X√¥i g√† x√©", emoji: "üç±", category: "breakfast",
                calories: 450, protein: 20, carbs: 70, 
                fat: 12, ingredients: ["G·∫°o n·∫øp", "G√†", "L√° chu·ªëi", "Mu·ªëi", "H√†nh phi"],
                steps: ["N·∫•u x√¥i", "Lu·ªôc g√†", "X√© g√†", "R·∫Øc h√†nh phi", "B√†y bi·ªán"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/xoi-ga-xe.jpg"
            },
            {
                id: 16, name: "B√∫n ri√™u cua", emoji: "üçú", category: "breakfast",
                calories: 420, protein: 22, carbs: 45, 
                fat: 18, ingredients: ["B√∫n", "Cua ƒë·ªìng", "ƒê·∫≠u ph·ª•", "C√† chua", "Rau s·ªëng"],
                steps: ["Gi√£ cua l·∫•y ri√™u", "N·∫•u n∆∞·ªõc d√πng", "Th·∫£ ƒë·∫≠u, c√† chua", "Tr·∫ßn b√∫n", "B√†y bi·ªán v·ªõi rau s·ªëng"],
                suitable: ["normal", "lose-weight"], image_url: "img/bun-rieu-cua.jpg"
            },
            {
                id: 17, name: "Mi·∫øn g√†", emoji: "üç≤", category: "breakfast",
                calories: 350, protein: 28, carbs: 35, 
                fat: 10, ingredients: ["Mi·∫øn dong", "Th·ªãt g√†", "M·ªôc nhƒ©", "H√†nh phi", "Rau m√πi"],
                steps: ["Lu·ªôc g√†, th√°i s·ª£i", "Tr·∫ßn mi·∫øn", "N·∫•u n∆∞·ªõc d√πng g√†", "Cho mi·∫øn, g√†, rau m√πi", "R·∫Øc h√†nh phi"],
                suitable: ["normal", "lose-weight", "muscle", "hypertension", "maintain"], image_url: "img/mien-ga.jpg"
            },
            {
                id: 18, name: "B√°nh m√¨ chay", emoji: "ü•ñü•¶", category: "breakfast",
                calories: 300, protein: 12, carbs: 50, 
                fat: 10, ingredients: ["B√°nh m√¨", "ƒê·∫≠u ph·ª• chi√™n", "Rau s·ªëng", "D∆∞a g√≥p", "N∆∞·ªõc t∆∞∆°ng"],
                steps: ["Chi√™n ƒë·∫≠u ph·ª•", "C·∫Øt b√°nh m√¨", "Cho ƒë·∫≠u ph·ª•, rau, d∆∞a", "R∆∞·ªõi n∆∞·ªõc t∆∞∆°ng", "Th∆∞·ªüng th·ª©c"],
                suitable: ["vegetarian", "lose-weight","maintain"], image_url: "img/banh-my-chay.jpg"
            },
            {
                id: 19, name: "Ch√°o s∆∞·ªùn", emoji: "üçö", category: "breakfast",
                calories: 360, protein: 20, carbs: 45, 
                fat: 12, ingredients: ["S∆∞·ªùn non", "G·∫°o", "H√†nh l√°", "Qu·∫©y", "Gia v·ªã"],
                steps: ["Ninh s∆∞·ªùn", "N·∫•u ch√°o t·ª´ n∆∞·ªõc s∆∞·ªùn", "X√© s∆∞·ªùn cho v√†o ch√°o", "R·∫Øc h√†nh, ƒÉn k√®m qu·∫©y"],
                suitable: ["normal", "maintain"], image_url: "img/chao-suon.jpg"
            },
            {
                id: 20, name: "Tr·ª©ng lu·ªôc v√† rau c·ªß lu·ªôc", emoji: "ü•öü•ï", category: "breakfast",
                calories: 200, protein: 18, carbs: 12, 
                fat: 10, ingredients: ["Tr·ª©ng g√†", "B√¥ng c·∫£i xanh", "C√† r·ªët", "Gia v·ªã"],
                steps: ["Lu·ªôc tr·ª©ng", "Lu·ªôc rau c·ªß", "Tr√¨nh b√†y"],
                suitable: ["lose-weight", "muscle", "vegetarian", "normal", "hypertension", "maintain"], image_url: "img/trung-rau-cu-luoc.jpg"
            },
            {
                id: 21, name: "S·ªØa chua kh√¥ng ƒë∆∞·ªùng v√† hoa qu·∫£", emoji: "ü•õüçì", category: "breakfast",
                calories: 180, protein: 12, carbs: 30, 
                fat: 3, ingredients: ["S·ªØa chua kh√¥ng ƒë∆∞·ªùng", "Chu·ªëi", "D√¢u t√¢y", "H·∫°t chia"],
                steps: ["C·∫Øt hoa qu·∫£", "Tr·ªôn s·ªØa chua v·ªõi hoa qu·∫£ v√† h·∫°t chia"],
                suitable: ["lose-weight", "vegetarian","maintain", "normal", "hypertension"], image_url: "img/sua-chua-hoa-qua.jpg"
            },
            {
                id: 22, name: "B√∫n ch·∫£", emoji: "üçú", category: "breakfast",
                calories: 450, protein: 30, carbs: 50, 
                fat: 18, ingredients: ["B√∫n", "Th·ªãt n∆∞·ªõng", "Ch·∫£ vi√™n", "N∆∞·ªõc ch·∫•m", "Rau s·ªëng"],
                steps: ["N∆∞·ªõng th·ªãt, ch·∫£", "Pha n∆∞·ªõc ch·∫•m", "Tr·∫ßn b√∫n", "B√†y bi·ªán v·ªõi rau s·ªëng"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/bun-cha.jpg"
            },
            {
                id: 23, name: "Ng√¥ lu·ªôc", emoji: "üåΩ", category: "breakfast",
                calories: 150, protein: 5, carbs: 30, 
                fat: 1.5, ingredients: ["Ng√¥ n·∫øp"],
                steps: ["Lu·ªôc ng√¥ kho·∫£ng 20 ph√∫t"],
                suitable: ["lose-weight", "vegetarian", "normal","maintain", "hypertension"], image_url: "img/ngo-luoc.jpg"
            },
            {
                id: 24, name: "B√∫n thang", emoji: "üçú", category: "breakfast",
                calories: 400, protein: 28, carbs: 40, 
                fat: 12, ingredients: ["B√∫n", "Th·ªãt g√†", "Tr·ª©ng", "Gi√≤ l·ª•a", "N·∫•m h∆∞∆°ng", "Rau th∆°m"],
                steps: ["N·∫•u n∆∞·ªõc d√πng g√†", "Th√°i s·ª£i th·ªãt g√†, tr·ª©ng, gi√≤", "Tr·∫ßn b√∫n", "B√†y bi·ªán"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/bun-thang.jpg"
            },
            {
                id: 25, name: "Khoai lang lu·ªôc", emoji: "üç†", category: "breakfast",
                calories: 180, protein: 4, carbs: 40, 
                fat: 1, ingredients: ["Khoai lang"],
                steps: ["R·ª≠a s·∫°ch khoai, lu·ªôc ch√≠n m·ªÅm"],
                suitable: ["lose-weight", "vegetarian", "normal","maintain", "hypertension"], image_url: "img/khoai-luoc.jpg"
            },
            {
                id: 26, name: "N∆∞·ªõc √©p rau c·ªß", emoji: "ü•§ü•¶", category: "breakfast",
                calories: 100, protein: 3, carbs: 20, 
                fat: 0.5, ingredients: ["C·∫ßn t√¢y", "D∆∞a chu·ªôt", "T√°o xanh", "G·ª´ng"],
                steps: ["R·ª≠a s·∫°ch nguy√™n li·ªáu, cho v√†o m√°y √©p"],
                suitable: ["lose-weight", "vegetarian", "normal", "hypertension", "maintain"], image_url: "img/nuoc-ep-trai-cay.jpg"
            },
            {
                id: 27, name: "Sinh t·ªë chu·ªëi y·∫øn m·∫°ch", emoji: "ü•§üçå", category: "breakfast",
                calories: 250, protein: 10, carbs: 45, 
                fat: 6, ingredients: ["Chu·ªëi", "Y·∫øn m·∫°ch", "S·ªØa t∆∞∆°i kh√¥ng ƒë∆∞·ªùng", "M·∫≠t ong"],
                steps: ["Xay nhuy·ªÖn t·∫•t c·∫£ nguy√™n li·ªáu"],
                suitable: ["muscle", "lose-weight", "vegetarian", "maintain", "normal", "hypertension"], image_url: "img/sinh-to-chuoi.jpg"
            },
            {
                id: 28, name: "Ph·ªü cu·ªën", emoji: "ü•¢", category: "breakfast",
                calories: 320, protein: 20, carbs: 35, 
                fat: 14, ingredients: ["B√°nh ph·ªü t∆∞∆°i", "Th·ªãt b√≤ lu·ªôc", "Rau th∆°m", "N∆∞·ªõc ch·∫•m chua ng·ªçt"],
                steps: ["Cu·ªën th·ªãt b√≤ v√† rau v√†o b√°nh ph·ªü", "Ch·∫•m n∆∞·ªõc m·∫Øm"],
                suitable: ["normal", "lose-weight", "maintain"], image_url: "img/pho-cuon.jpg"
            },
            {
                id: 29, name: "B√∫n m·ªçc", emoji: "üçú", category: "breakfast",
                calories: 400, protein: 28, carbs: 42, 
                fat: 15, ingredients: ["B√∫n", "M·ªçc (ch·∫£ s·ªëng)", "S∆∞·ªùn non", "N·∫•m h∆∞∆°ng", "Rau th∆°m"],
                steps: ["Ninh s∆∞·ªùn l·∫•y n∆∞·ªõc d√πng", "Th·∫£ m·ªçc, n·∫•m v√†o n·∫•u ch√≠n", "Tr·∫ßn b√∫n", "B√†y bi·ªán"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/bun-moc.jpg"
            },
            {
                id: 30, name: "B√°nh tr√°ng cu·ªën th·ªãt heo", emoji: "ü•¢", category: "breakfast",
                calories: 350, protein: 22, carbs: 40, 
                fat: 15, ingredients: ["Th·ªãt heo lu·ªôc", "B√°nh tr√°ng", "Rau s·ªëng", "D·ª©a", "N∆∞·ªõc ch·∫•m m·∫Øm n√™m"],
                steps: ["Cu·ªën th·ªãt, rau, d·ª©a v√†o b√°nh tr√°ng", "Ch·∫•m m·∫Øm n√™m"],
                suitable: ["normal", "lose-weight", "maintain"], image_url: "img/banh-trang-cuon-thit.jpg"
            },

            // Lunch
            {
                id: 6, name: "C∆°m g√† x√© phay", emoji: "üçõ", category: "lunch",
                calories: 650, protein: 40, carbs: 75, 
                fat: 20, ingredients: ["G√†", "G·∫°o", "G·ª´ng", "D∆∞a leo", "N∆∞·ªõc m·∫Øm g·ª´ng"],
                steps: ["Lu·ªôc g√†, x√© phay", "N·∫•u c∆°m", "Tr·ªôn g√† v·ªõi g·ªèi", "B√†y bi·ªán"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/com-ga-xe-phay.jpg"
            },
            {
                id: 7, name: "B√∫n b√≤ Hu·∫ø", emoji: "üçú", category: "lunch",
                calories: 500, protein: 35, carbs: 55, 
                fat: 18, ingredients: ["B√∫n", "Th·ªãt b√≤", "Ch·∫£", "S·∫£ ·ªõt", "Rau th∆°m"],
                steps: ["Ninh x∆∞∆°ng", "X√†o s·∫£ ·ªõt", "N·∫•u n∆∞·ªõc d√πng", "Tr·∫ßn b√∫n", "B√†y bi·ªán"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/bun-bo-hue.jpg"
            },
            {
                id: 8, name: "Salad rau c·ªß qu·∫£ ·ª©c g√†", emoji: "ü•ó", category: "lunch",
                calories: 320, protein: 28, carbs: 25, 
                fat: 15, ingredients: ["X√† l√°ch", "C√† chua", "D∆∞a leo", "·ª®c g√† lu·ªôc/√°p ch·∫£o", "D·∫ßu olive", "Gi·∫•m t√°o"],
                steps: ["R·ª≠a rau, th√°i c·ªß", "Th√°i ·ª©c g√†", "Tr·ªôn ƒë·ªÅu v·ªõi d·∫ßu olive v√† gi·∫•m t√°o"],
                suitable: ["weight-loss", "muscle", "diabetes", "hypertension", "normal", "maintain"], image_url: "img/salad-rau-cu-ga.jpg"
            },
            {
                id: 9, name: "C√† ri g√† n∆∞·ªõc c·ªët d·ª´a", emoji: "üçõ", category: "lunch",
                calories: 600, protein: 45, carbs: 25, 
                fat: 35, ingredients: ["G√†", "N∆∞·ªõc c·ªët d·ª´a", "B·ªôt c√† ri", "Khoai t√¢y", "C√† r·ªët"],
                steps: ["Th√°i g√†, ∆∞·ªõp c√† ri", "X√†o th∆°m", "ƒê·ªï n∆∞·ªõc c·ªët d·ª´a, khoai, c√† r·ªët", "Ninh m·ªÅm"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/ca-ri-ga.jpg"
            },
            {
                id: 10, name: "M√¨ Qu·∫£ng g√†/t√¥m", emoji: "üçú", category: "lunch",
                calories: 480, protein: 28, carbs: 60, 
                fat: 15, ingredients: ["M√¨ Qu·∫£ng", "T√¥m th·ªãt", "Tr·ª©ng c√∫t", "B√°nh tr√°ng", "L·∫°c rang"],
                steps: ["N·∫•u n∆∞·ªõc d√πng", "Lu·ªôc m√¨", "X√†o t√¥m th·ªãt", "B√†y bi·ªán", "R·∫Øc l·∫°c"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/mi-quang.jpg"
            },
            {
                id: 31, name: "C∆°m t·∫•m s∆∞·ªùn b√¨ ch·∫£", emoji: "üçöüçñ", category: "lunch",
                calories: 700, protein: 45, carbs: 80, 
                fat: 25, ingredients: ["C∆°m t·∫•m", "S∆∞·ªùn n∆∞·ªõng", "B√¨", "Ch·∫£ tr·ª©ng", "D∆∞a leo", "N∆∞·ªõc m·∫Øm"],
                steps: ["N∆∞·ªõng s∆∞·ªùn", "H·∫•p ch·∫£", "B√†y c∆°m, s∆∞·ªùn, b√¨, ch·∫£", "ƒÇn k√®m d∆∞a leo v√† n∆∞·ªõc m·∫Øm"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/com-tam-suon-bi.jpg"
            },
            {
                id: 32, name: "B√∫n ƒë·∫≠u m·∫Øm t√¥m", emoji: "üçú", category: "lunch",
                calories: 580, protein: 32, carbs: 50, 
                fat: 28, ingredients: ["B√∫n l√°", "ƒê·∫≠u ph·ª• r√°n", "Ch·∫£ c·ªëm", "Th·ªãt lu·ªôc", "M·∫Øm t√¥m", "Rau s·ªëng"],
                steps: ["R√°n ƒë·∫≠u, ch·∫£ c·ªëm", "Lu·ªôc th·ªãt", "Pha m·∫Øm t√¥m", "B√†y bi·ªán"],
                suitable: ["normal", "maintain"], image_url: "img/bun-dau-mam-tom.jpg"
            },
            {
                id: 33, name: "G·ªèi cu·ªën chay", emoji: "ü•¢", category: "lunch",
                calories: 250, protein: 10, carbs: 35, 
                fat: 8, ingredients: ["B√°nh tr√°ng", "ƒê·∫≠u ph·ª•", "Rau x√† l√°ch", "B√∫n", "N∆∞·ªõc t∆∞∆°ng ƒë·∫≠u ph·ªông"],
                steps: ["Cu·ªën ƒë·∫≠u ph·ª•, rau, b√∫n v√†o b√°nh tr√°ng", "Ch·∫•m n∆∞·ªõc t∆∞∆°ng"],
                suitable: ["vegetarian", "lose-weight", "normal", "hypertension", "maintain"], image_url: "img/goi-cuon-chay.jpg"
            },
            {
                id: 34, name: "Ph·ªü x√†o gi√≤n", emoji: "üçù", category: "lunch",
                calories: 550, protein: 35, carbs: 55, 
                fat: 25, ingredients: ["Ph·ªü kh√¥", "Th·ªãt b√≤/g√†", "Rau c·∫£i", "C√† r·ªët", "Gia v·ªã"],
                steps: ["Chi√™n ph·ªü gi√≤n", "X√†o th·ªãt v√† rau c·ªß", "Tr·ªôn ƒë·ªÅu ho·∫∑c ƒë·ªï l√™n ph·ªü"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/pho-xao-gion.jpg"
            },
            {
                id: 35, name: "C∆°m chi√™n h·∫£i s·∫£n", emoji: "üçöüç§", category: "lunch",
                calories: 620, protein: 35, carbs: 65, 
                fat: 28, ingredients: ["C∆°m ngu·ªôi", "T√¥m", "M·ª±c", "Tr·ª©ng", "Rau c·ªß", "N∆∞·ªõc m·∫Øm"],
                steps: ["X√†o t√¥m, m·ª±c, rau c·ªß", "Cho c∆°m v√†o chi√™n", "ƒê·∫≠p tr·ª©ng, n√™m gia v·ªã"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/com-chien-hai-san.jpg"
            },
            {
                id: 36, name: "Canh b√≠ ƒëao n·∫•u t√¥m", emoji: "üç≤üç§", category: "lunch",
                calories: 280, protein: 22, carbs: 25, 
                fat: 10, ingredients: ["B√≠ ƒëao", "T√¥m t∆∞∆°i", "H√†nh l√°", "Gia v·ªã"],
                steps: ["S∆° ch·∫ø t√¥m, ∆∞·ªõp gia v·ªã", "N·∫•u canh b√≠ ƒëao", "Cho t√¥m v√†o n·∫•u ch√≠n", "R·∫Øc h√†nh l√°"],
                suitable: ["lose-weight", "normal", "hypertension", "maintain"], image_url: "img/canh-bi-nau-tom.jpg"
            },
            {
                id: 37, name: "Th·ªãt lu·ªôc ch·∫•m m·∫Øm t√©p", emoji: "üçñüå∂Ô∏è", category: "lunch",
                calories: 400, protein: 35, carbs: 8, 
                fat: 25, ingredients: ["Th·ªãt ba ch·ªâ lu·ªôc", "M·∫Øm t√©p ch∆∞ng", "D∆∞a chu·ªôt", "Rau s·ªëng"],
                steps: ["Lu·ªôc th·ªãt, th√°i l√°t", "Pha m·∫Øm t√©p", "B√†y bi·ªán"],
                suitable: ["normal", "maintain"], image_url: "img/thit-luoc-mam-tep.jpg"
            },
            {
                id: 38, name: "ƒê·∫≠u ph·ª• s·ªët c√† chua", emoji: "üç≤", category: "lunch",
                calories: 320, protein: 18, carbs: 30, 
                fat: 18, ingredients: ["ƒê·∫≠u ph·ª•", "C√† chua", "H√†nh l√°", "Gia v·ªã"],
                steps: ["R√°n ƒë·∫≠u ph·ª•", "Phi h√†nh, x√†o c√† chua", "Cho ƒë·∫≠u ph·ª• v√†o, n√™m n·∫øm"],
                suitable: ["vegetarian", "normal", "hypertension", "maintain"], image_url: "img/dau-sot-ca.jpg"
            },
            {
                id: 39, name: "B√≤ l√∫c l·∫Øc", emoji: "ü•©", category: "lunch",
                calories: 550, protein: 40, carbs: 25, 
                fat: 35, ingredients: ["Th·ªãt b√≤", "H√†nh t√¢y", "·ªöt chu√¥ng", "N∆∞·ªõc t∆∞∆°ng", "B∆°"],
                steps: ["Th√°i th·ªãt b√≤ vu√¥ng", "X√†o th·ªãt b√≤ v·ªõi h√†nh t√¢y, ·ªõt chu√¥ng", "N√™m n·∫øm"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/bo-luc-lac.jpg"
            },
            {
                id: 40, name: "Canh rau ng√≥t th·ªãt bƒÉm", emoji: "üç≤ü•¨", category: "lunch",
                calories: 250, protein: 18, carbs: 12, 
                fat: 10, ingredients: ["Rau ng√≥t", "Th·ªãt bƒÉm", "Gia v·ªã"],
                steps: ["Phi h√†nh, x√†o th·ªãt bƒÉm", "Cho n∆∞·ªõc v√†o ƒëun s√¥i", "Th·∫£ rau ng√≥t, n√™m n·∫øm"],
                suitable: ["lose-weight", "normal", "hypertension", "maintain"], image_url: "img/canh-rau-ngot.jpg"
            },
            {
                id: 41, name: "B√∫n ch·∫£ gi√≤", emoji: "üçú", category: "lunch",
                calories: 500, protein: 22, carbs: 55, 
                fat: 22, ingredients: ["B√∫n", "Ch·∫£ gi√≤ (nem r√°n)", "Rau s·ªëng", "N∆∞·ªõc ch·∫•m chua ng·ªçt"],
                steps: ["R√°n ch·∫£ gi√≤", "Tr·∫ßn b√∫n", "B√†y bi·ªán v·ªõi rau s·ªëng v√† n∆∞·ªõc ch·∫•m"],
                suitable: ["normal", "maintain"], image_url: "img/bun-cha-gio.jpg"
            },
            {
                id: 42, name: "C∆°m g·∫°o l·ª©t ·ª©c g√† n∆∞·ªõng v√† rau lu·ªôc", emoji: "üçöüçóü•¶", category: "lunch",
                calories: 500, protein: 45, carbs: 45, 
                fat: 12, ingredients: ["G·∫°o l·ª©t", "·ª®c g√†", "B√¥ng c·∫£i xanh", "ƒê·∫≠u que"],
                steps: ["N·∫•u c∆°m g·∫°o l·ª©t", "N∆∞·ªõng ·ª©c g√†", "Lu·ªôc rau c·ªß", "B√†y bi·ªán"],
                suitable: ["lose-weight", "muscle", "normal", "hypertension", "maintain"], image_url: "img/com-gao-lut.jpg"
            },
            {
                id: 43, name: "C∆°m s∆∞·ªùn n∆∞·ªõng", emoji: "üçöüçñ", category: "lunch",
                calories: 600, protein: 40, carbs: 65, 
                fat: 25, ingredients: ["C∆°m tr·∫Øng", "S∆∞·ªùn c·ªët l·∫øt", "N∆∞·ªõc ∆∞·ªõp s∆∞·ªùn", "D∆∞a chu·ªôt"],
                steps: ["∆Ø·ªõp s∆∞·ªùn, n∆∞·ªõng ch√≠n", "N·∫•u c∆°m", "B√†y bi·ªán s∆∞·ªùn v·ªõi c∆°m v√† d∆∞a chu·ªôt"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/com-suon-nuong.jpg"
            },
            {
                id: 44, name: "Ph·ªü tr·ªôn g√†", emoji: "üçúü•ó", category: "lunch",
                calories: 420, protein: 28, carbs: 45, 
                fat: 15, ingredients: ["B√°nh ph·ªü", "Th·ªãt g√† x√©", "L·∫°c rang", "Rau th∆°m", "N∆∞·ªõc tr·ªôn chua ng·ªçt"],
                steps: ["Tr·∫ßn ph·ªü", "Tr·ªôn ph·ªü v·ªõi g√†, rau th∆°m, l·∫°c", "R∆∞·ªõi n∆∞·ªõc tr·ªôn"],
                suitable: ["normal", "lose-weight", "maintain"], image_url: "img/pho-tron-ga.jpg"
            },
            {
                id: 45, name: "M√≥n x√†o th·∫≠p c·∫©m chay", emoji: "ü•¶ü•ï", category: "lunch",
                calories: 350, protein: 12, carbs: 35, 
                fat: 18, ingredients: ["B√¥ng c·∫£i", "C√† r·ªët", "N·∫•m", "ƒê·∫≠u H√† Lan", "ƒê·∫≠u ph·ª•", "N∆∞·ªõc t∆∞∆°ng"],
                steps: ["S∆° ch·∫ø rau c·ªß, ƒë·∫≠u ph·ª•", "X√†o ch√≠n t·ªõi t·∫•t c·∫£ nguy√™n li·ªáu", "N√™m n·∫øm"],
                suitable: ["vegetarian", "lose-weight", "normal", "hypertension", "maintain"], image_url: "img/xao-chay.jpg"
            },

            // Dinner
            {
                id: 11, name: "Canh chua c√° l√≥c", emoji: "üç≤", category: "dinner",
                calories: 250, protein: 30, carbs: 15, 
                fat: 10, ingredients: ["C√° l√≥c", "D·ª©a", "ƒê·∫≠u b·∫Øp", "C√† chua", "Me chua", "Rau th∆°m"],
                steps: ["Th√°i c√°, ∆∞·ªõp gia v·ªã", "N·∫•u n∆∞·ªõc me", "Cho c√† chua, d·ª©a, ƒë·∫≠u b·∫Øp", "Th√™m c√°", "Cho rau th∆°m"],
                suitable: ["normal", "weight-loss", "diabetes", "hypertension", "gout", "heart", "maintain"], image_url: "img/canh-chua-ca-loc.jpg"
            },
            {
                id: 12, name: "Th·ªãt kho t√†u tr·ª©ng c√∫t", emoji: "üçñü•ö", category: "dinner",
                calories: 480, protein: 38, carbs: 10, 
                fat: 32, ingredients: ["Th·ªãt ba ch·ªâ", "Tr·ª©ng c√∫t", "N∆∞·ªõc m·∫Øm", "ƒê∆∞·ªùng ph√®n", "Ti√™u"],
                steps: ["C·∫Øt th·ªãt, lu·ªôc tr·ª©ng", "L√†m n∆∞·ªõc m√†u", "Kho th·ªãt v√† tr·ª©ng", "Om l·ª≠a nh·ªè"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/thit-kho-tau-trung.jpg"
            },
            {
                id: 13, name: "B√°nh x√®o mi·ªÅn T√¢y", emoji: "ü•û", category: "dinner",
                calories: 420, protein: 20, carbs: 48, 
                fat: 18, ingredients: ["B·ªôt b√°nh x√®o", "T√¥m th·ªãt", "Gi√° ƒë·ªó", "H√†nh l√°", "Rau s·ªëng"],
                steps: ["Pha b·ªôt", "X√†o nh√¢n", "ƒê·ªï b·ªôt v√†o ch·∫£o", "Cho nh√¢n", "G·∫•p ƒë√¥i, ƒÉn k√®m rau s·ªëng"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/banh-xeo-mien-tay.jpg"
            },
            {
                id: 46, name: "C√° di√™u h·ªìng h·∫•p x√¨ d·∫ßu", emoji: "üêü", category: "dinner",
                calories: 280, protein: 35, carbs: 12, 
                fat: 12, ingredients: ["C√° di√™u h·ªìng", "G·ª´ng", "H√†nh l√°", "X√¨ d·∫ßu", "D·∫ßu m√®"],
                steps: ["S∆° ch·∫ø c√°", "H·∫•p c√° v·ªõi g·ª´ng, h√†nh", "Pha n∆∞·ªõc s·ªët x√¨ d·∫ßu, r∆∞·ªõi l√™n c√°"],
                suitable: ["lose-weight", "normal", "muscle", "hypertension", "maintain"], image_url: "img/ca-hap-xi-dau.jpg"
            },
            {
                id: 47, name: "G√† kho g·ª´ng", emoji: "üçóüå∂Ô∏è", category: "dinner",
                calories: 420, protein: 35, carbs: 18, 
                fat: 22, ingredients: ["Th·ªãt g√†", "G·ª´ng", "N∆∞·ªõc m·∫Øm", "ƒê∆∞·ªùng", "Ti√™u"],
                steps: ["∆Ø·ªõp g√† v·ªõi gia v·ªã, g·ª´ng", "Kho g√† ƒë·∫øn khi th·ªãt sƒÉn l·∫°i, n∆∞·ªõc keo"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/ga-kho.jpg"
            },
            {
                id: 48, name: "Rau mu·ªëng lu·ªôc ch·∫•m t∆∞∆°ng", emoji: "ü•¨üçö", category: "dinner",
                calories: 180, protein: 6, carbs: 18, 
                fat: 10, ingredients: ["Rau mu·ªëng", "T∆∞∆°ng", "·ªöt", "T·ªèi"],
                steps: ["Lu·ªôc rau mu·ªëng", "Pha t∆∞∆°ng v·ªõi ·ªõt, t·ªèi"],
                suitable: ["lose-weight", "vegetarian", "normal", "hypertension",], image_url: "img/rau-muong-cham-tuong.jpg"
            },
            {
                id: 49, name: "ƒê·∫≠u ph·ª• T·ª© Xuy√™n chay", emoji: "üå∂Ô∏èüç≤", category: "dinner",
                calories: 350, protein: 20, carbs: 25, 
                fat: 22, ingredients: ["ƒê·∫≠u ph·ª• non", "N·∫•m h∆∞∆°ng", "ƒê·∫≠u H√† Lan", "S·ªët T·ª© Xuy√™n chay"],
                steps: ["C·∫Øt ƒë·∫≠u ph·ª•, n·∫•m", "X√†o c√°c nguy√™n li·ªáu v·ªõi s·ªët T·ª© Xuy√™n", "N√™m n·∫øm"],
                suitable: ["vegetarian", "normal", "maintain"], image_url: "img/dau-sot-tu-xuyen.jpg"
            },
            {
                id: 50, name: "S√∫p b√≠ ƒë·ªè th·ªãt bƒÉm", emoji: "ü•£üéÉ", category: "dinner",
                calories: 280, protein: 18, carbs: 30, 
                fat: 12, ingredients: ["B√≠ ƒë·ªè", "Th·ªãt bƒÉm", "S·ªØa t∆∞∆°i kh√¥ng ƒë∆∞·ªùng", "H√†nh ng√≤"],
                steps: ["Lu·ªôc b√≠ ƒë·ªè, xay nhuy·ªÖn", "X√†o th·ªãt bƒÉm", "Cho b√≠ ƒë·ªè, s·ªØa v√†o n·∫•u s√∫p", "N√™m gia v·ªã"],
                suitable: ["lose-weight", "normal", "hypertension", "maintain"], image_url: "img/sup-bi-do-thit.jpg"
            },
            {
                id: 51, name: "T√¥m rim th·ªãt", emoji: "üç§üçñ", category: "dinner",
                calories: 400, protein: 28, carbs: 12, 
                fat: 25, ingredients: ["T√¥m t∆∞∆°i", "Th·ªãt ba ch·ªâ", "N∆∞·ªõc m·∫Øm", "ƒê∆∞·ªùng", "H√†nh t√≠m"],
                steps: ["∆Ø·ªõp t√¥m th·ªãt", "Rim ƒë·∫øn khi n∆∞·ªõc keo, t√¥m th·ªãt th·∫•m gia v·ªã"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/tom-rim-thit.jpg"
            },
            {
                id: 52, name: "Rau c·ªß lu·ªôc ch·∫•m kho qu·∫πt", emoji: "ü•¨üçö", category: "dinner",
                calories: 350, protein: 12, carbs: 25, 
                fat: 22, ingredients: ["Rau c·ªß", "Th·ªãt ba ch·ªâ", "T√¥m kh√¥", "N∆∞·ªõc m·∫Øm", "ƒê∆∞·ªùng", "Ti√™u"],
                steps: ["Lu·ªôc rau v√† c·ªß", "L√†m kho qu·∫πt t·ª´ th·ªãt, t√¥m kh√¥", "ƒÇn k√®m"],
                suitable: ["normal", "maintain"], image_url: "img/rau-cu-kho-quet.jpg"
            },
            {
                id: 53, name: "Canh m∆∞·ªõp ƒë·∫Øng nh·ªìi th·ªãt", emoji: "üç≤ü•í", category: "dinner",
                calories: 320, protein: 22, carbs: 18, 
                fat: 18, ingredients: ["M∆∞·ªõp ƒë·∫Øng", "Th·ªãt bƒÉm", "M·ªôc nhƒ©", "H√†nh l√°", "Gia v·ªã"],
                steps: ["Nh·ªìi th·ªãt v√†o m∆∞·ªõp ƒë·∫Øng", "N·∫•u canh ƒë·∫øn khi m∆∞·ªõp ƒë·∫Øng m·ªÅm v√† th·ªãt ch√≠n"],
                suitable: ["normal", "lose-weight", "hypertension", "maintain"], image_url: "img/canh-muop-dang.jpg"
            },
            {
                id: 54, name: "Tr·ª©ng ƒë√∫c th·ªãt", emoji: "üç≥üçñ", category: "dinner",
                calories: 350, protein: 28, carbs: 8, 
                fat: 28, ingredients: ["Tr·ª©ng g√†", "Th·ªãt bƒÉm", "H√†nh l√°", "N∆∞·ªõc m·∫Øm"],
                steps: ["Tr·ªôn tr·ª©ng v·ªõi th·ªãt bƒÉm, h√†nh", "ƒê√∫c tr·ª©ng tr√™n ch·∫£o n√≥ng"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/trung-duc-thit.jpg"
            },
            {
                id: 55, name: "Nem l·ª•i n∆∞·ªõng", emoji: "üç¢", category: "dinner",
                calories: 450, protein: 28, carbs: 35, 
                fat: 22, ingredients: ["Th·ªãt heo xay", "B√¨ heo", "S·∫£", "Gia v·ªã", "Rau s·ªëng", "N∆∞·ªõc ch·∫•m"],
                steps: ["Tr·ªôn th·ªãt, b√¨, s·∫£", "Xi√™n v√†o que s·∫£, n∆∞·ªõng", "ƒÇn k√®m rau s·ªëng v√† n∆∞·ªõc ch·∫•m"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/nem-lui.jpg"
            },
            {
                id: 56, name: "Canh n·∫•m r∆°m chay", emoji: "üç≤üçÑ", category: "dinner",
                calories: 180, protein: 7, carbs: 18, 
                fat: 7, ingredients: ["N·∫•m r∆°m", "ƒê·∫≠u ph·ª• non", "H√†nh l√°", "Gia v·ªã chay"],
                steps: ["Phi h√†nh, cho n·∫•m v√†o x√†o s∆°", "Th√™m n∆∞·ªõc, ƒë·∫≠u ph·ª•, ƒëun s√¥i", "N√™m n·∫øm"],
                suitable: ["vegetarian", "lose-weight", "normal", "hypertension", "maintain"], image_url: "img/canh-nam-chay.jpg"
            },
            {
                id: 57, name: "G·ªèi g√† b·∫Øp c·∫£i", emoji: "ü•óüçó", category: "dinner",
                calories: 280, protein: 22, carbs: 22, 
                fat: 12, ingredients: ["Th·ªãt g√† lu·ªôc", "B·∫Øp c·∫£i", "C√† r·ªët", "H√†nh t√¢y", "N∆∞·ªõc m·∫Øm g·ªèi"],
                steps: ["X√© g√†, th√°i rau c·ªß", "Tr·ªôn ƒë·ªÅu v·ªõi n∆∞·ªõc m·∫Øm g·ªèi"],
                suitable: ["lose-weight", "normal", "hypertension", "maintain"], image_url: "img/goi-ga-bap-cai.jpg"
            },
            {
                id: 58, name: "M·ª±c x√†o s·∫£ ·ªõt", emoji: "ü¶ëüå∂Ô∏è", category: "dinner",
                calories: 350, protein: 28, carbs: 12, 
                fat: 20, ingredients: ["M·ª±c t∆∞∆°i", "S·∫£", "·ªöt", "T·ªèi", "Gia v·ªã"],
                steps: ["S∆° ch·∫ø m·ª±c, th√°i mi·∫øng", "Phi s·∫£ ·ªõt t·ªèi", "Cho m·ª±c v√†o x√†o nhanh tay", "N√™m n·∫øm"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/muc-xao-xa.jpg"
            },
            {
                id: 60, name: "Canh kh·ªï qua nh·ªìi ƒë·∫≠u ph·ª•", emoji: "üç≤ü•í", category: "dinner",
                calories: 220, protein: 12, carbs: 18, 
                fat: 12, ingredients: ["Kh·ªï qua", "ƒê·∫≠u ph·ª• nghi·ªÅn", "M·ªôc nhƒ©", "H√†nh l√°", "Gia v·ªã chay"],
                steps: ["Nh·ªìi ƒë·∫≠u ph·ª• v√†o kh·ªï qua", "N·∫•u canh ƒë·∫øn khi kh·ªï qua m·ªÅm"],
                suitable: ["vegetarian", "lose-weight", "normal", "hypertension", "maintain"], image_url: "img/canh-kho-qua-dau.jpg"
            },
            {
                id: 61, name: "C∆°m chi√™n rau c·ªß chay", emoji: "üçöü•¶ü•ï", category: "dinner",
                calories: 450, protein: 18, carbs: 55, 
                fat: 18, ingredients: ["C∆°m ngu·ªôi", "ƒê·∫≠u H√† Lan", "Ng√¥", "C√† r·ªët", "ƒê·∫≠u ph·ª•", "N∆∞·ªõc t∆∞∆°ng"],
                steps: ["X√†o rau c·ªß v√† ƒë·∫≠u ph·ª•", "Cho c∆°m v√†o chi√™n, n√™m n·∫øm n∆∞·ªõc t∆∞∆°ng"],
                suitable: ["vegetarian", "normal", "maintain"], image_url: "img/com-chien-chay.jpg"
            },

            // Snacks
            {
                id: 14, name: "G·ªèi cu·ªën t√¥m th·ªãt", emoji: "ü•¢", category: "snack",
                calories: 180, protein: 18, carbs: 20, 
                fat: 6, ingredients: ["B√°nh tr√°ng", "T√¥m", "Th·ªãt", "B√∫n", "Rau th∆°m"],
                steps: ["Lu·ªôc t√¥m th·ªãt", "∆Ø·ªõt b√°nh tr√°ng", "Cho nh√¢n", "Cu·ªën tr√≤n", "Ch·∫•m n∆∞·ªõc m·∫Øm"],
                suitable: ["weight-loss", "normal", "diabetes", "hypertension", "gout", "heart", "maintain"], image_url: "img/goi-cuon-tom-thit.jpg"
            },
            {
                id: 15, name: "Ch√® ƒë·∫≠u xanh", emoji: "üç®", category: "snack",
                calories: 220, protein: 10, carbs: 45, 
                fat: 3, ingredients: ["ƒê·∫≠u xanh", "N∆∞·ªõc c·ªët d·ª´a", "ƒê∆∞·ªùng", "Mu·ªëi", "L√° d·ª©a"],
                steps: ["N·∫•u ƒë·∫≠u", "Xay nhuy·ªÖn", "N·∫•u v·ªõi n∆∞·ªõc c·ªët d·ª´a", "N√™m ƒë∆∞·ªùng", "ƒê·ªÉ ngu·ªôi"],
                suitable: ["vegetarian", "normal", "diabetes", "hypertension", "gout", "heart", "maintain"], image_url: "img/che-dau-xanh.jpg"
            },
            {
                id: 62, name: "Tr√°i c√¢y t∆∞∆°i (·ªïi, d∆∞a h·∫•u, thanh long)", emoji: "üçâüçì", category: "snack",
                calories: 100, protein: 1, carbs: 25, 
                fat: 0, ingredients: ["·ªîi", "D∆∞a h·∫•u", "Thanh long"],
                steps: ["R·ª≠a s·∫°ch, th√°i mi·∫øng"],
                suitable: ["lose-weight", "vegetarian", "normal", "diabetes", "hypertension", "gout", "heart", "maintain"], image_url: "img/trai-cay-tuoi.jpg"
            },
            {
                id: 63, name: "S·ªØa chua kh√¥ng ƒë∆∞·ªùng", emoji: "ü•õ", category: "snack",
                calories: 120, protein: 10, carbs: 15, 
                fat: 1, ingredients: ["S·ªØa chua kh√¥ng ƒë∆∞·ªùng"],
                steps: ["ƒÇn tr·ª±c ti·∫øp"],
                suitable: ["lose-weight", "vegetarian", "normal", "diabetes", "hypertension", "gout", "heart", "maintain"], image_url: "img/sua-chua-khong-duong.jpg"
            },
            {
                id: 64, name: "H·∫°t ƒëi·ªÅu rang mu·ªëi", emoji: "üå∞", category: "snack",
                calories: 200, protein: 7, carbs: 12, 
                fat: 16, ingredients: ["H·∫°t ƒëi·ªÅu", "Mu·ªëi"],
                steps: ["Rang h·∫°t ƒëi·ªÅu v·ªõi mu·ªëi"],
                suitable: ["normal", "muscle", "maintain"], image_url: "img/dieu-rang-muoi.jpg"
            },
            {
                id: 65, name: "B√°nh chu·ªëi n∆∞·ªõng", emoji: "üçåüç∞", category: "snack",
                calories: 280, protein: 5, carbs: 55, 
                fat: 8, ingredients: ["Chu·ªëi", "B·ªôt g·∫°o", "N∆∞·ªõc c·ªët d·ª´a", "ƒê∆∞·ªùng"],
                steps: ["Tr·ªôn chu·ªëi v·ªõi b·ªôt v√† n∆∞·ªõc c·ªët d·ª´a", "N∆∞·ªõng ch√≠n v√†ng"],
                suitable: ["normal", "vegetarian", "maintain"], image_url: "img/banh-chuoi-nuong.jpg"
            },
            {
                id: 66, name: "N∆∞·ªõc d·ª´a t∆∞∆°i", emoji: "ü••", category: "snack",
                calories: 60, protein: 1, carbs: 15, 
                fat: 0, ingredients: ["N∆∞·ªõc d·ª´a t∆∞∆°i"],
                steps: ["U·ªëng tr·ª±c ti·∫øp"],
                suitable: ["normal", "lose-weight", "hypertension", "maintain"], image_url: "img/nuoc-dua.jpg"
            },
            {
                id: 67, name: "Khoai t√¢y lu·ªôc", emoji: "ü•î", category: "snack",
                calories: 120, protein: 2.5, carbs: 28, 
                fat: 0.2, ingredients: ["Khoai t√¢y"],
                steps: ["Lu·ªôc khoai t√¢y ch√≠n m·ªÅm"],
                suitable: ["lose-weight", "vegetarian", "normal", "hypertension", "maintain"], image_url: "img/khoai-tay-luoc.jpg"
            },
            {
                id: 68, name: "Th·∫°ch rau c√¢u", emoji: "üçÆ", category: "snack",
                calories: 100, protein: 0, carbs: 25, 
                fat: 0, ingredients: ["B·ªôt rau c√¢u", "ƒê∆∞·ªùng", "N∆∞·ªõc c·ªët d·ª´a (t√πy ch·ªçn)"],
                steps: ["N·∫•u b·ªôt rau c√¢u v·ªõi n∆∞·ªõc, ƒë∆∞·ªùng", "ƒê·ªï khu√¥n, ƒë·ªÉ ngu·ªôi"],
                suitable: ["lose-weight", "vegetarian", "normal", "hypertension", "maintain"], image_url: "img/thach-rau-cau.jpg"
            },
            {
                id: 69, name: "Ch√® b∆∞·ªüi", emoji: "üçß", category: "snack",
                calories: 250, protein: 4, carbs: 55, 
                fat: 3, ingredients: ["C√πi b∆∞·ªüi", "ƒê·∫≠u xanh", "N∆∞·ªõc c·ªët d·ª´a", "ƒê∆∞·ªùng"],
                steps: ["L√†m c√πi b∆∞·ªüi gi√≤n", "N·∫•u ƒë·∫≠u xanh", "Tr·ªôn v·ªõi n∆∞·ªõc c·ªët d·ª´a v√† ƒë∆∞·ªùng"],
                suitable: ["normal", "vegetarian", "maintain"], image_url: "img/che-buoi.jpg"
            },
            {
                id: 70, name: "B·ªèng ng√¥ ( √≠t ƒë∆∞·ªùng)", emoji: "üçø", category: "snack",
                calories: 150, protein: 4, carbs: 30, 
                fat: 1.5, ingredients: ["H·∫°t ng√¥", "√çt ƒë∆∞·ªùng"],
                steps: ["L√†m n√≥ng d·∫ßu","Cho ng√¥","ƒê·∫£o ƒë·ªÅu v√† ƒë·∫≠y n·∫Øp","Cho ƒë∆∞·ªùng v√†o v√† ƒë·∫£o"],
                suitable: ["lose-weight", "vegetarian", "normal", "hypertension", "maintain"], image_url: "img/bong-ngo.jpg"
            },
            {
                id: 71, name: "B√°nh khoai m√¨ n∆∞·ªõng", emoji: "üç†üç∞", category: "snack",
                calories: 300, protein: 6, carbs: 60, 
                fat: 6, ingredients: ["Khoai m√¨", "N∆∞·ªõc c·ªët d·ª´a", "ƒê∆∞·ªùng"],
                steps: ["Xay khoai m√¨, tr·ªôn v·ªõi n∆∞·ªõc c·ªët d·ª´a, ƒë∆∞·ªùng", "N∆∞·ªõng ch√≠n v√†ng"],
                suitable: ["normal", "vegetarian", "maintain"], image_url: "img/banh-khoai-mi.jpg"
            },
            {
                id: 72, name: "Tr√† Atiso", emoji: "‚òï", category: "snack",
                calories: 10, protein: 0, carbs: 2, 
                fat: 0, ingredients: ["B√¥ng Atiso kh√¥"],
                steps: ["H√£m tr√† v·ªõi n∆∞·ªõc s√¥i"],
                suitable: ["lose-weight", "vegetarian", "normal", "diabetes", "hypertension", "gout", "heart", "maintain"], image_url: "img/tra-atiso.jpg"
            },
            {
                id: 73, name: "ƒê·∫≠u ph·ªông lu·ªôc", emoji: "ü•ú", category: "snack",
                calories: 180, protein: 8, carbs: 12, 
                fat: 12, ingredients: ["ƒê·∫≠u ph·ªông t∆∞∆°i", "Mu·ªëi"],
                steps: ["Lu·ªôc ƒë·∫≠u ph·ªông v·ªõi mu·ªëi"],
                suitable: ["normal", "lose-weight", "hypertension", "maintain"], image_url: "img/dau-phong-luoc.jpg"
            },
            {
                id: 74, name: "B√°nh ƒëa m√®", emoji: "üçò", category: "snack",
                calories: 120, protein: 3, carbs: 25, 
                fat: 3, ingredients: ["B·ªôt g·∫°o", "M√® rang"],
                steps: ["N∆∞·ªõng b√°nh ƒëa"],
                suitable: ["normal", "vegetarian", "maintain"], image_url: "img/banh-da-me.jpg"
            },
            {
                id: 75, name: "Sinh t·ªë rau m√°", emoji: "ü•§üåø", category: "snack",
                calories: 80, protein: 2, carbs: 18, 
                fat: 0, ingredients: ["Rau m√°", "N∆∞·ªõc d·ª´a t∆∞∆°i (t√πy ch·ªçn)", "ƒê∆∞·ªùng (t√πy ch·ªçn)"],
                steps: ["Xay rau m√° v·ªõi n∆∞·ªõc d·ª´a/n∆∞·ªõc l·ªçc"],
                suitable: ["lose-weight", "vegetarian", "normal", "hypertension", "maintain"], image_url: "img/rau-ma.jpg"
            }
        ];
        // Selected goal
        let selectedGoal = '';

        // Show screen function
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        // Login function
        function login() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            if (email && password) {
                showScreen('menu-screen');
                generatePersonalizedMenu(); // G·ªçi h√†m t·∫°o menu sau khi ƒëƒÉng nh·∫≠p
            } else {
                alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß email v√† m·∫≠t kh·∫©u!');
            }
        }

        // Select goal function
        function selectGoal(element, goal) {
            document.querySelectorAll('.goal-card').forEach(card => {
                card.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedGoal = goal;
            userProfile.goal = goal;
        }

        // Save profile function
        function saveProfile() {
            userProfile = {
                gender: document.getElementById('gender').value,
                age: parseInt(document.getElementById('age').value) || 25,
                height: parseInt(document.getElementById('height').value) || 170,
                weight: parseInt(document.getElementById('weight').value) || 65,
                healthCondition: document.getElementById('health-condition').value,
                activityLevel: document.getElementById('activity-level').value,
                goal: selectedGoal || 'maintain'
            };

            if (!userProfile.age || !userProfile.height || !userProfile.weight) {
                alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!');
                return;
            }

            showScreen('menu-screen');
            generatePersonalizedMenu(); // G·ªçi h√†m t·∫°o menu sau khi l∆∞u h·ªì s∆°
        }

        // Calculate nutritional needs based on user profile
        function calculateNutritionalNeeds() {
            const { weight, height, age, gender, activityLevel, goal } = userProfile;
            
            // Calculate BMR (Basal Metabolic Rate) using Mifflin-St Jeor Equation
            let bmr = 10 * weight + 6.25 * height - 5 * age + (gender === 'male' ? 5 : -161);

            // Adjust for activity level
            const activityMultipliers = {
                sedentary: 1.2,
                light: 1.375,
                moderate: 1.55,
                active: 1.725
            };
            
            let calories = bmr * activityMultipliers[activityLevel];

            // Adjust calories based on goal
            if (goal === 'weight-loss') {
                calories *= 0.85; // Reduce by 15% for weight loss
            } else if (goal === 'muscle') {
                calories *= 1.15; // Increase by 15% for muscle gain
            } else if (goal === 'maintain' && userProfile.healthCondition === 'normal') {
                // Aim for a typical maintenance calorie level for average adults
                // This might be around 2000-2500 for moderate activity, adjusting based on BMR
                // Example: If BMR is 1500, moderate activity is 1.55 * 1500 = 2325.
                // We'll let the standard calculation handle it, but can add specific overrides if needed.
            }


            // Calculate macronutrients
            // Standard values: Protein 4 cal/g, Carbs 4 cal/g, Fat 9 cal/g
            // Set a target range for macros first, then derive carbs from remaining calories
            let proteinTarget, fatTarget;

            if (goal === 'muscle') {
                proteinTarget = weight * 2.2; // Higher protein for muscle gain (e.g., 2.2g/kg)
                fatTarget = weight * 0.9; // Moderate fat (e.g., 0.9g/kg)
            } else if (goal === 'weight-loss') {
                proteinTarget = weight * 1.8; // Moderate protein for satiety (e.g., 1.8g/kg)
                fatTarget = weight * 0.7; // Lower fat (e.g., 0.7g/kg)
            } else if (goal === 'vegetarian') {
                proteinTarget = weight * 1.5; // Adjusted protein for vegetarian (e.g., 1.5g/kg)
                fatTarget = weight * 0.8; // Standard fat
            }
            else { // maintain or normal health condition
                proteinTarget = weight * 1.6; // General protein target (e.g., 1.6g/kg)
                fatTarget = weight * 0.8; // General fat target (e.g., 0.8g/kg)
            }
            
            // Convert protein and fat targets to calories
            const proteinCalories = proteinTarget * 4;
            const fatCalories = fatTarget * 9;

            // Calculate remaining calories for carbs
            const carbsCalories = calories - proteinCalories - fatCalories;
            const carbsTarget = Math.max(0, carbsCalories / 4); // Ensure carbs are not negative

            return {
                calories: Math.round(calories),
                protein: Math.round(proteinTarget),
                carbs: Math.round(carbsTarget),
                fat: Math.round(fatTarget)
            };
        }

        // Generate personalized menu
        function generatePersonalizedMenu() {
            const nutritionalNeeds = calculateNutritionalNeeds();
            
            // Update profile summary
            document.getElementById('profile-summary').innerHTML = `
                <h3>H·ªì s∆° c·ªßa b·∫°n</h3>
                <p><strong>Gi·ªõi t√≠nh:</strong> ${userProfile.gender === 'male' ? 'Nam' : 'N·ªØ'}</p>
                <p><strong>Tu·ªïi:</strong> ${userProfile.age} tu·ªïi</p>
                <p><strong>Chi·ªÅu cao:</strong> ${userProfile.height} cm</p>
                <p><strong>C√¢n n·∫∑ng:</strong> ${userProfile.weight} kg</p>
                <p><strong>T√¨nh tr·∫°ng s·ª©c kh·ªèe:</strong> ${{
                    normal: 'B√¨nh th∆∞·ªùng',
                    hypertension: 'Cao huy·∫øt √°p',
                    diabetes: 'Ti·ªÉu ƒë∆∞·ªùng',
                    gout: 'B·ªánh gout',
                    heart: 'B·ªánh tim'
                }[userProfile.healthCondition]}</p>
                <p><strong>M·ª©c ƒë·ªô v·∫≠n ƒë·ªông:</strong> ${{
                    sedentary: '√çt v·∫≠n ƒë·ªông',
                    light: 'V·∫≠n ƒë·ªông nh·∫π',
                    moderate: 'V·∫≠n ƒë·ªông v·ª´a',
                    active: 'V·∫≠n ƒë·ªông nhi·ªÅu'
                }[userProfile.activityLevel]}</p>
                <p><strong>M·ª•c ti√™u:</strong> ${{
                    muscle: 'TƒÉng c∆°',
                    'weight-loss': 'Gi·∫£m c√¢n',
                    maintain: 'Gi·ªØ s·ª©c kh·ªèe',
                    vegetarian: 'ƒÇn chay'
                }[userProfile.goal]}</p>
            `;

            // Update nutritional targets
            document.getElementById('target-calories').textContent = nutritionalNeeds.calories;
            document.getElementById('target-protein').textContent = nutritionalNeeds.protein;
            document.getElementById('target-carbs').textContent = nutritionalNeeds.carbs;
            document.getElementById('target-fat').textContent = nutritionalNeeds.fat;

            // Generate meals for each category
            ['breakfast', 'lunch', 'dinner', 'snack'].forEach(category => {
                dailyMenu[category] = selectMeals(category);
                renderMeals(category);
            });

            updateNutritionProgress();
        }

        // Select meals for a category
        function selectMeals(category) {
            const { goal, healthCondition } = userProfile;

            let filteredByCategory = meals.filter(meal => meal.category === category);

            let suitableMeals = [];

            // ∆Øu ti√™n 1: Ph√π h·ª£p v·ªõi C·∫¢ m·ª•c ti√™u V√Ä t√¨nh tr·∫°ng s·ª©c kh·ªèe
            suitableMeals = filteredByCategory.filter(meal =>
                meal.suitable.includes(goal) && meal.suitable.includes(healthCondition)
            );

            // ∆Øu ti√™n 2: N·∫øu kh√¥ng c√≥ m√≥n ph√π h·ª£p ho√†n h·∫£o, ∆∞u ti√™n m√≥n ph√π h·ª£p v·ªõi T√åNH TR·∫†NG S·ª®C KH·ªéE
            // Ho·∫∑c n·∫øu m·ª•c ti√™u l√† 'maintain', ∆∞u ti√™n c√°c m√≥n 'normal'
            if (suitableMeals.length === 0) {
                suitableMeals = filteredByCategory.filter(meal =>
                    (meal.suitable.includes(healthCondition) && healthCondition !== 'normal') ||
                    (goal === 'maintain' && meal.suitable.includes('normal'))
                );
            }

            // ∆Øu ti√™n 3: N·∫øu v·∫´n kh√¥ng c√≥, ∆∞u ti√™n m√≥n ph√π h·ª£p v·ªõi M·ª§C TI√äU
            if (suitableMeals.length === 0) {
                suitableMeals = filteredByCategory.filter(meal =>
                    meal.suitable.includes(goal)
                );
            }

            // ∆Øu ti√™n 4: N·∫øu v·∫´n kh√¥ng c√≥, l·∫•y c√°c m√≥n ƒë∆∞·ª£c ƒë√°nh d·∫•u l√† "normal"
            if (suitableMeals.length === 0) {
                suitableMeals = filteredByCategory.filter(meal =>
                    meal.suitable.includes('normal')
                );
            }

            // ∆Øu ti√™n 5: N·∫øu v·∫´n kh√¥ng c√≥, l·∫•y b·∫•t k·ª≥ m√≥n n√†o trong danh m·ª•c ƒë√≥ (fallback cu·ªëi c√πng)
            if (suitableMeals.length === 0) {
                console.warn(`Kh√¥ng t√¨m th·∫•y m√≥n ƒÉn ph√π h·ª£p v·ªõi b·∫•t k·ª≥ ti√™u ch√≠ n√†o. Ch·ªçn ng·∫´u nhi√™n trong ${category}.`);
                // T·∫°o m·ªôt ƒë·ªëi t∆∞·ª£ng meal_dummy n·∫øu kh√¥ng c√≥ meal n√†o ƒë∆∞·ª£c t√¨m th·∫•y
                return [{
                    id: -1, 
                    name: "Kh√¥ng c√≥ m√≥n ph√π h·ª£p", 
                    category: category,
                    calories: 0, 
                    protein: 0, 
                    carbs: 0, 
                    fat: 0,
                    ingredients: [], 
                    steps: [], 
                    suitable: [],
                    image_url: "https://via.placeholder.com/300x200?text=No+Meal+Found" // H√¨nh ·∫£nh placeholder cho tr∆∞·ªùng h·ª£p kh√¥ng c√≥ m√≥n
                }];
            }

            // Ch·ªçn m·ªôt m√≥n ƒÉn ng·∫´u nhi√™n t·ª´ danh s√°ch ƒë√£ l·ªçc
            const randomMeal = suitableMeals[Math.floor(Math.random() * suitableMeals.length)];
            return [randomMeal];
        }

        // H√†m renderMeals ƒë∆∞·ª£c ch·ªânh s·ª≠a ƒë·ªÉ ch·ªâ hi·ªÉn th·ªã ·∫£nh
        function renderMeals(category) {
            const mealsContainer = document.getElementById(`${category}-meals`);
            mealsContainer.innerHTML = '';
            dailyMenu[category].forEach(meal => {
                // Lu√¥n s·ª≠ d·ª•ng image_url. ƒê·∫£m b·∫£o t·∫•t c·∫£ m√≥n ƒÉn ƒë·ªÅu c√≥ image_url
                const imageContent = meal.image_url 
                    ? `<img src="${meal.image_url}" alt="${meal.name}">` 
                    : '<img src="https://via.placeholder.com/300x200?text=No+Image" alt="No Image">'; // Fallback n·∫øu kh√¥ng c√≥ URL ·∫£nh

                mealsContainer.innerHTML += `
                    <div class="meal-card" onclick="showRecipe(${meal.id})">
                        <div class="meal-image">${imageContent}</div>
                        <div class="meal-info">
                            <div class="meal-title">${meal.name}</div>
                            <div class="nutrition-info">
                                <div class="nutrition-item">
                                    <div class="value">${meal.calories}</div>
                                    <div class="label">Calo</div>
                                </div>
                                <div class="nutrition-item">
                                    <div class="value">${meal.protein}g</div>
                                    <div class="label">ƒê·∫°m</div>
                                </div>
                                <div class="nutrition-item">
                                    <div class="value">${meal.carbs}g</div>
                                    <div class="label">Carbs</div>
                                </div>
                                <div class="nutrition-item">
                                    <div class="value">${meal.fat}g</div>
                                    <div class="label">Ch·∫•t b√©o</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        function updateNutritionProgress() {
            let totalCalories = 0;
            let totalProtein = 0;
            let totalCarbs = 0;
            let totalFat = 0;

            for (const category in dailyMenu) {
                dailyMenu[category].forEach(meal => {
                    totalCalories += meal.calories;
                    totalProtein += meal.protein;
                    totalCarbs += meal.carbs;
                    totalFat += meal.fat;
                });
            }

            const nutritionalNeeds = calculateNutritionalNeeds();

            document.getElementById('total-calories').textContent = totalCalories;
            document.getElementById('total-protein').textContent = totalProtein;
            document.getElementById('total-carbs').textContent = totalCarbs;
            document.getElementById('total-fat').textContent = totalFat;

            // Update progress bars
            document.getElementById('calories-progress').style.width = `${Math.min(100, (totalCalories / nutritionalNeeds.calories) * 100)}%`;
            document.getElementById('protein-progress').style.width = `${Math.min(100, (totalProtein / nutritionalNeeds.protein) * 100)}%`;
            document.getElementById('carbs-progress').style.width = `${Math.min(100, (totalCarbs / nutritionalNeeds.carbs) * 100)}%`;
            document.getElementById('fat-progress').style.width = `${Math.min(100, (totalFat / nutritionalNeeds.fat) * 100)}%`;
        }


        // Swap meal function
        function swapMeal(category) {
            dailyMenu[category] = selectMeals(category); // Ch·ªçn l·∫°i m√≥n cho b·ªØa ƒÉn
            renderMeals(category); // Render l·∫°i giao di·ªán cho b·ªØa ƒÉn ƒë√≥
            updateNutritionProgress(); // C·∫≠p nh·∫≠t l·∫°i t·ªïng dinh d∆∞·ª°ng
        }

        // Show recipe modal
        function showRecipe(mealId) {
            const meal = meals.find(m => m.id === mealId);
            if (!meal || meal.id === -1) { // Th√™m ƒëi·ªÅu ki·ªán ki·ªÉm tra meal_dummy
                alert("Kh√¥ng c√≥ th√¥ng tin chi ti·∫øt cho m√≥n n√†y.");
                return;
            }

            // Lo·∫°i b·ªè emoji kh·ªèi ti√™u ƒë·ªÅ modal, ch·ªâ hi·ªÉn th·ªã t√™n m√≥n ƒÉn
            document.getElementById('recipe-details').innerHTML = `
                <h2>${meal.name}</h2>
                ${meal.image_url ? `<img src="${meal.image_url}" alt="${meal.name}" style="width:100%; height:auto; border-radius: 8px; margin-bottom: 15px;">` : ''}
                <h3>Nguy√™n li·ªáu:</h3>
                <ul class="ingredients-list">
                    ${meal.ingredients.map(ingredient => `<li>${ingredient}</li>`).join('')}
                </ul>
                <h3>C√°ch l√†m:</h3>
                <ol class="steps-list">
                    ${meal.steps.map(step => `<li>${step}</li>`).join('')}
                </ol>
                <div class="nutrition-info">
                    <div class="nutrition-item">
                        <div class="value">${meal.calories}</div>
                        <div class="label">Calories</div>
                    </div>
                    <div class="nutrition-item">
                        <div class="value">${meal.protein}g</div>
                        <div class="label">Protein</div>
                    </div>
                    <div class="nutrition-item">
                        <div class="value">${meal.carbs}g</div>
                        <div class="label">Carbs</div>
                    </div>
                    <div class="nutrition-item">
                        <div class="value">${meal.fat}g</div>
                        <div class="label">Ch·∫•t b√©o</div>
                    </div>
                </div>
            `;
            
            document.getElementById('recipe-modal').style.display = 'block';
        }

        // Close recipe modal
        function closeRecipe() {
            document.getElementById('recipe-modal').style.display = 'none';
        }

        // Initialize (g·ªçi khi trang ƒë∆∞·ª£c t·∫£i l·∫ßn ƒë·∫ßu)
        document.addEventListener('DOMContentLoaded', () => {
            // ƒê·∫£m b·∫£o c√°c gi√° tr·ªã trong form ƒë∆∞·ª£c c·∫≠p nh·∫≠t v√†o userProfile tr∆∞·ªõc khi generate menu l·∫ßn ƒë·∫ßu
            userProfile.gender = document.getElementById('gender').value;
            userProfile.age = parseInt(document.getElementById('age').value) || 25;
            userProfile.height = parseInt(document.getElementById('height').value) || 170;
            userProfile.weight = parseInt(document.getElementById('weight').value) || 65;
            userProfile.healthCondition = document.getElementById('health-condition').value;
            userProfile.activityLevel = document.getElementById('activity-level').value;
            // goal s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t khi ng∆∞·ªùi d√πng ch·ªçn ho·∫∑c gi·ªØ m·∫∑c ƒë·ªãnh 'maintain'

            generatePersonalizedMenu();
        });
    </script>
</body>
</html>
